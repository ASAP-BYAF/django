{% extends "conan_db_app/base.html" %}
{% load static %}

{% block title %}キャラクター詳細{% endblock %}

{% block main %}
<main class="w-[80vw] mx-auto">
    <section class="flex justify-around" >
    {% comment %} 画像ありを試しましたがいまいちでした。<section class="flex justify-around bg-[url('/static/conan_db_app/images/bg_renga.jpg')] bg-[length:50%_50%]" > {% endcomment %}
        <img src="{% static 'conan_db_app/images/conan.jpg' %}" alt="conan" class="rounded-full border-solid border-8 border-amber-600 w-[20vw] h-[20vw] my-auto">
        <div>
            <p class="font-mono text-6xl text-center mx-auto my-7">{{data.name}}</p>
            <hr class="h-2 bg-amber-600 mb-7">
            <table class="w-[100vw] md:w-[25vw] font-mono text-center text-xl mx-auto [&_th]:text-amber-500">
                <tr>
                    <th>性別</th>
                    <td>{{data.gender}}</td>
                </tr>
                <tr>
                    <th>年齢</th>
                    <td>{{data.age}}</td>
                </tr>
                <tr>
                    <th>誕生日</th>
                    <td>{{data.birthday|date:"m/d" }}</td>
                </tr>
                <tr>
                    <th>職業</th>
                    <td>{{data.profession}}</td>
                </tr>
            </table>
        </div>
    </section>
    <section class="w-[80%] mx-auto my-5">
        {{data.complement}}
    </section>
    {% comment %} <div class="fixed bottom-[calc(50px-20vh+24px)] h-[20vh] w-[min(100vw,500px)] "> {% endcomment %}
        {% comment %} <label for="open_close" class="fixed right-1">△</label> {% endcomment %}
    <section>
    <h1 class="w-[30vw] mx-auto text-2xl">登場話数</h1>
    <hr class="h-2 w-[30vw] mx-auto bg-amber-600 mb-7">
    <ul class="w-[30vw] ml-[25vw] list-none">
        {% for item in data2 %}
        {% ifchanged  item.volume.number %}
        <li>
            <ul class="flex [&>li]:flex-1">
                <li class="p-2"></li>
                {% comment %} dummy です。話数の li タグと縦の並びをそろえるためにあります。 {% endcomment %}
                <li class=" before:rounded-full before:bg-amber-500
                py-2 border-l-4 border-solid border-gray-300
                before:content-[''] before:inline-block
                before:relative before:-left-3 before:top-1 
                before:w-5 before:h-5">
                {{item.volume.number}} 巻
                </li>
            </ul>
        </li>
        {% endifchanged %} 
        <li>
        <ul class="flex [&>li]:flex-1">
            <li class="p-2">
                {% for event in event_list %}
                    {% comment %} {{data.event_related_to.first.content}} {% endcomment %}
                    {% if event.chapter == item %}
                        {{event.content}}
                    {% endif %}
                {% endfor %}
            </li>
            <li class="py-2 border-l-4 border-solid border-gray-300
                        before:rounded-full before:border-2 before:border-solid before:border-amber-500 before:bg-white
                        before:content-[''] before:inline-block
                        before:relative before:-left-3 before:top-1 
                        before:w-5 before:h-5">
                        {{item.number}} 話 ({{item.name}})
            </li>
        </ul>
        </li>
        {% endfor %}
    </ul>
    </section>
</main>
{% endblock %}
